(this.webpackJsonpapibase=this.webpackJsonpapibase||[]).push([[23],{353:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(5),o=a.n(r),u=a(10),s=a(13),i=a(71),l=a(21),d=a(250),m=a(266),f=a(359),b=a(86),p=a.n(b),E=a(22),I=a(87),v=a.n(I),h=a(15),O=a(14),j=a(9),g=a(360),_=a(26),x=a(11),y=a(29),k=a(23),N=a(18),A=function(e){var t=e.dataInicial,a=e.abrirModal,r=e.setAbrirModal,i=e.catMenu,d=e.GetRolMenuAcceso,m=e.rolMenuAcceso,f=Object(E.c)(),b=Object(E.d)((function(e){return e})),p=Object(n.useState)(!1),I=Object(s.a)(p,2),v=I[0],O=I[1],A=Object(n.useState)([]),w=Object(s.a)(A,2),M=w[0],S=w[1],C=Object(k.a)(t),z=Object(s.a)(C,2),T=z[0],F=z[1],G=Object(n.useState)(t.menuId),P=Object(s.a)(G,2),D=P[0],L=P[1],R=Object(n.useState)([]),q=Object(s.a)(R,2),B=q[0],H=q[1],J=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.a)("rolmenuacceso",{method:"POST",body:JSON.stringify(T)});case 2:e.sent&&(Object(j.b)("Permiso registrado exitosamente"),f(Object(y.a)()),d(t.rolId),r(!1));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(u.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.a)("rolmenuacceso",{method:"PUT",body:JSON.stringify(T)});case 2:(a=e.sent)&&(Object(j.b)(a),f(Object(y.a)()),d(t.rolId)),r(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(u.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),O(!0),!(t.rol_menu_accesoId>0)){e.next=7;break}return e.next=5,U();case 5:e.next=9;break;case 7:return e.next=9,J();case 9:O(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(u.a)(o.a.mark((function e(a){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!M.find((function(e){return 19===e.menuId&&3===e.accesoId}))){e.next=9;break}return O(!0),e.next=4,Object(h.a)("menuacceso?menuId=".concat(a,"&estadoId=1"));case 4:n=e.sent,c=[],n&&(n.map((function(e){var a=e.menu_accesoId,n=e.Acceso.descripcion;if(!m.find((function(e){return e.menu_accesoId===a&&(1===e.estadoId||2===e.estadoId)&&e.menu_accesoId!==t.menu_accesoId}))){var r={menu_accesoId:a,descripcion:n};c.push(r)}})),H(c)),e.next=10;break;case 9:H([{menu_accesoId:"",descripcion:"No esta autorizado"}]);case 10:O(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){!function(){if(null===b||void 0===b?void 0:b.accesos){var e=b.accesos.filter((function(e){return 19===e.menuId}));S(e)}}()}),[]),Object(n.useEffect)((function(){W(D)}),[D,M]);return c.a.createElement(g.a,{show:a,onHide:function(){return r(!1)}},!0===v?c.a.createElement(N.a,null):c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a.Header,{closeButton:!0},c.a.createElement(g.a.Title,{as:"h5"},t.rol_menu_accesoId>0?"Actualizar Permiso":"Nuevo Permiso")),c.a.createElement(g.a.Body,null,c.a.createElement(x.ValidationForm,{onSubmit:V,onErrorSubmit:function(e,t,a){Object(j.c)("Por favor complete toda la informaci\xf3n solicitada por el formulario")}},c.a.createElement(_.a.Row,null,c.a.createElement(_.a.Group,{as:l.a,md:"12"},c.a.createElement(_.a.Label,{htmlFor:"menuId"},"Menu"),c.a.createElement(x.SelectGroup,{name:"menuId",id:"menuId",value:D,required:!0,errorMessage:"Campo obligatorio",onChange:function(e){var t=e.target.value;L(t)}},c.a.createElement("option",{value:""},"Seleccione un menu"),i.map((function(e){var t=e.menuId,a=e.descripcion;return c.a.createElement("option",{value:t,key:t},a)})))),c.a.createElement(_.a.Group,{as:l.a,md:"12"},c.a.createElement(_.a.Label,{htmlFor:"menu_accesoId"},"Acceso"),c.a.createElement(x.SelectGroup,{name:"menu_accesoId",id:"menu_accesoId",value:T.menu_accesoId,required:!0,errorMessage:"Campo obligatorio",onChange:F},c.a.createElement("option",{value:""},"Seleccione un permiso"),B.map((function(e){var t=e.menu_accesoId,a=e.descripcion;return c.a.createElement("option",{value:t,key:t},a)})))),t.rol_menu_accesoId>0&&c.a.createElement(_.a.Group,{as:l.a,md:"12"},c.a.createElement(_.a.Label,{htmlFor:"estadoId"},"Estado"),c.a.createElement(x.SelectGroup,{name:"estadoId",id:"estadoId",value:T.estadoId,required:!0,errorMessage:"Campo obligatorio",onChange:F},c.a.createElement("option",{value:""},"Seleccione un estado"),c.a.createElement("option",{value:"1"},"Activo"),c.a.createElement("option",{value:"2"},"Inactivo"))),c.a.createElement("div",{className:"col-sm-3"}),c.a.createElement("div",{className:"col-sm-3"},c.a.createElement("button",{type:"button",onClick:function(){r(!1)},className:"btn btn-warning"}," Cancelar")),c.a.createElement("div",{className:"col-sm-3"},c.a.createElement("button",{type:"submit",className:"btn btn-success"}," ",t.rol_menu_accesoId>0?"Actualizar":"Registrar")))))))},w=a(88),M=a(80),S=function(e){var t=e.idrol,a=Object(E.d)((function(e){return e})),r=Object(n.useState)([]),b=Object(s.a)(r,2),I=b[0],g=b[1],_=Object(n.useState)(!0),x=Object(s.a)(_,2),y=x[0],k=x[1],S=Object(n.useState)(!1),C=Object(s.a)(S,2),z=C[0],T=C[1],F=Object(n.useState)([]),G=Object(s.a)(F,2),P=G[0],D=G[1],L=Object(n.useState)([]),R=Object(s.a)(L,2),q=R[0],B=R[1],H=Object(n.useState)([]),J=Object(s.a)(H,2),U=J[0],V=J[1],W={menuId:"",rolId:t,menu_accesoId:"",estadoId:1},X=Object(n.useState)(W),K=Object(s.a)(X,2),Q=K[0],Y=K[1],Z=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I.find((function(e){return 21===e.menuId&&3===e.accesoId}))){e.next=8;break}return k(!0),e.next=4,Object(h.a)("menu?estadoId=1");case 4:(t=e.sent)&&D(t),e.next=9;break;case 8:D([{menuId:"",descripcion:"No esta autorizado"}]);case 9:k(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I.find((function(e){return 20===e.menuId&&3===e.accesoId}))){e.next=7;break}return Object(w.b)("#mytable"),k(!0),e.next=5,Object(h.a)("rolmenuacceso?rolId=".concat(t,"&estadoId=1;2"));case 5:(a=e.sent)&&B(a);case 7:k(!1),Object(w.a)("#mytable");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I.find((function(e){return 11===e.menuId&&3===e.accesoId}))){e.next=8;break}return k(!0),e.next=4,Object(h.a)("rol?id=".concat(t,"&include=0"));case 4:(a=e.sent)&&V(a[0]),e.next=9;break;case 8:V([{nombre:"No esta autorizado"}]);case 9:k(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){!function(){if(null===a||void 0===a?void 0:a.accesos){var e=a.accesos.filter((function(e){return 20===e.menuId||11===e.menuId||21===e.menuId}));g(e)}k(!1)}()}),[null===a||void 0===a?void 0:a.accesos]),Object(n.useEffect)((function(){Z()}),[I]),Object(n.useEffect)((function(){ee(t),$(t)}),[t,I]),c.a.createElement(O.a,null,!0===y?c.a.createElement(N.a,null):c.a.createElement(c.a.Fragment,null,c.a.createElement(i.a,{className:"btn-page"},c.a.createElement(l.a,{sm:12},I.find((function(e){return 11===e.menuId&&3===e.accesoId}))?c.a.createElement(d.a,null,c.a.createElement(d.a.Header,null,c.a.createElement(d.a.Title,{as:"h5"},"".concat(U.nombre)," Acceso")),c.a.createElement(d.a.Body,null,c.a.createElement(i.a,{className:"align-items-center m-l-0"},c.a.createElement(l.a,null),c.a.createElement(l.a,{className:"text-right"},I.find((function(e){return 20===e.menuId&&1===e.accesoId}))&&c.a.createElement(m.a,{variant:"success",className:"btn-sm btn-round has-ripple",onClick:function(){T(!0),Y(W)}},c.a.createElement("i",{className:"feather icon-plus"})," Agregar Acceso"))),I.find((function(e){return 20===e.menuId&&3===e.accesoId}))?c.a.createElement(f.a,{striped:!0,hover:!0,responsive:!0,bordered:!0,id:"mytable"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"C\xf3digo"),c.a.createElement("th",null,"Menu"),c.a.createElement("th",null,"Acceso"),c.a.createElement("th",null,"Estado"),I.find((function(e){return 20===e.menuId&&2===e.accesoId||20===e.menuId&&4===e.accesoId}))&&c.a.createElement("th",null))),c.a.createElement("tbody",null,q.map((function(e){var t=e.rol_menu_accesoId,a=e.MenuAcceso,n=a.Menu.descripcion,r=a.Acceso.descripcion,s=e.Estado.descripcion;return c.a.createElement("tr",{key:t},c.a.createElement("td",null,t),c.a.createElement("td",null,n),c.a.createElement("td",null,r),c.a.createElement("td",null,s),I.find((function(e){return 20===e.menuId&&2===e.accesoId||20===e.menuId&&4===e.accesoId}))&&c.a.createElement("td",{style:{textAlign:"center"}},I.find((function(e){return 20===e.menuId&&2===e.accesoId}))&&c.a.createElement("button",{className:"btn-icon btn btn-info btn-sm",onClick:function(){!function(e){var t=q.find((function(t){return t.rol_menu_accesoId===e})),a=t.rol_menu_accesoId,n=t.rolId,c=t.menu_accesoId,r=t.estadoId,o=t.MenuAcceso.menuId;Y({rol_menu_accesoId:a,menu_accesoId:c,estadoId:r,menuId:o,rolId:n}),T(!0)}(t)}},c.a.createElement("i",{className:"feather icon-edit"})),I.find((function(e){return 20===e.menuId&&4===e.accesoId}))&&c.a.createElement("button",{className:"btn-icon btn btn-danger btn-sm",onClick:function(){var e;e=t,v()(p.a).fire({title:"Alerta?",text:"Esta seguro que desea eliminar el elemento",type:"warning",showCloseButton:!0,showCancelButton:!0}).then(function(){var t=Object(u.a)(o.a.mark((function t(a){var n,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.value){t.next=8;break}return t.next=4,Object(h.a)("rolmenuacceso/".concat(e),{method:"DELETE"});case 4:(n=t.sent)&&(Object(j.b)(n),c=q.filter((function(t){return t.rol_menu_accesoId!==e})),B(c)),t.next=9;break;case 8:Object(j.c)("No se elimin\xf3 ning\xfan elemento");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},c.a.createElement("i",{className:"feather icon-trash-2"}))))})))):c.a.createElement(M.a,null),!0===z&&c.a.createElement(A,{abrirModal:z,setAbrirModal:T,catMenu:P,dataInicial:Q,GetRolMenuAcceso:$,rolMenuAcceso:q}))):c.a.createElement(M.a,null)))))};t.default=function(e){var t=e.match.params.idrol;t=t||"";var a=atob(t).split("=")[1];return c.a.createElement(S,{idrol:a})}},80:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0),c=a.n(n),r=a(71),o=a(21),u=a(358),s=a(14),i=function(){return c.a.createElement(s.a,null,c.a.createElement(r.a,null,c.a.createElement(o.a,null,c.a.createElement(u.a,{variant:"danger"},c.a.createElement(u.a.Heading,{as:"h4"},"Informaci\xf3n!"),c.a.createElement("p",null,"No esta autorizado para poder visualizar los elementos"),c.a.createElement("hr",null),c.a.createElement("p",{className:"mb-0"},"Comuniquese con el administrador para la asignaci\xf3n de permisos")))))}},88:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return o}));var n=a(92),c=a.n(n);c.a.DataTable=a(106),a(110);var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;c()(e).DataTable({searching:!0,bLengthChange:!1,bAutoWidth:!1,lengthMenu:[[10,25,50,-1],[10,25,50,"Todos"]],displayLength:t,language:{processing:"Cargando informaci\xf3n",search:"Filtrar por:",lengthMenu:"Mostrar _MENU_ filas",info:"Vizualizaci\xf3n  _END_ de _TOTAL_ filas",infoEmpty:"Vizualizaci\xf3n del elemento 0 a 0 de 0 filas",infoFiltered:"(Filtrado de _MAX_ filas en total)",infoPostFix:"",loadingRecords:"Cargando...",zeroRecords:"No se logr\xf3 encontrar ninguna coincidencia",emptyTable:"No existen registros",paginate:{first:"Primera",previous:"Anterior",next:"Siguiente",last:"Ultima"},aria:{sortAscending:": active para ordenar la columna en orden ascendente",sortDescending:": active para ordenar la columna en orden descendente"}}})},o=function(e){c()(e).DataTable().destroy()}}}]);
//# sourceMappingURL=23.82f577b8.chunk.js.map