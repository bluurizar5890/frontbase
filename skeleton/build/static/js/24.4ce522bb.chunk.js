(this["webpackJsonpable-pro-v16.12.0"]=this["webpackJsonpable-pro-v16.12.0"]||[]).push([[24],{345:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(5),i=a.n(c),o=a(10),u=a(13),l=a(71),s=a(21),m=a(249),d=a(26),p=a(265),f=a(359),b=a(11),E=a(87),I=a.n(E),v=a(22),h=a(86),O=a.n(h),j=a(15),g=a(14),x=a(9),k=a(360),S=a(23),y=a(18),w=function(e){var t=e.dataInicial,a=e.abrirModal,c=e.setAbrirModal,l=e.catPaises,m=e.GetMunicipios,p=Object(S.a)(t),f=Object(u.a)(p,2),E=f[0],I=f[1],v=Object(n.useState)(!1),h=Object(u.a)(v,2),O=h[0],g=h[1],w=Object(n.useState)([]),N=Object(u.a)(w,2),C=N[0],M=N[1],G=Object(n.useState)(t.paisId),F=Object(u.a)(G,2),P=F[0],q=F[1],D=function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,Object(j.a)("departamento?paisId=".concat(t,"&estadoId=1&include=0"));case 3:a=e.sent,M(a),g(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.a)("municipio",{method:"POST",body:JSON.stringify(E)});case 2:e.sent&&(Object(x.b)("Municipio registrado exitosamente"),m(E.departamentoId),c(!1));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.a)("municipio",{method:"PUT",body:JSON.stringify(E)});case 2:(t=e.sent)&&(Object(x.b)(t),m(E.departamentoId)),c(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(o.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),g(!0),!(t.municipioId>0)){e.next=7;break}return e.next=5,L();case 5:e.next=9;break;case 7:return e.next=9,A();case 9:g(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){D(t.paisId)}),[]);var z="Campo obligatorio";return r.a.createElement(k.a,{show:a,onHide:function(){return c(!1)}},!0===O?r.a.createElement(y.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a.Header,{closeButton:!0},r.a.createElement(k.a.Title,{as:"h5"},t.municipioId>0?"Actualizar Municipio":"Nuevo Municipio")),r.a.createElement(k.a.Body,null,r.a.createElement(b.ValidationForm,{onSubmit:T,onErrorSubmit:function(e,t,a){Object(x.c)("Por favor complete toda la informaci\xf3n solicitada por el formulario")}},r.a.createElement(d.a.Row,null,r.a.createElement(d.a.Group,{as:s.a,md:"12"},r.a.createElement(d.a.Label,{htmlFor:"paisId"},"Pais"),r.a.createElement(b.SelectGroup,{name:"paisId",id:"paisId",required:!0,onChange:function(e){var t=e.target.value;D(t),q(t)},value:P,errorMessage:z},r.a.createElement("option",{value:""},"Seleccione un Pais"),l.map((function(e){var t=e.paisId,a=e.descripcion;return r.a.createElement("option",{value:t,key:t},a)})))),r.a.createElement(d.a.Group,{as:s.a,md:"12"},r.a.createElement(d.a.Label,{htmlFor:"departamentoId"},"Departamento"),r.a.createElement(b.SelectGroup,{name:"departamentoId",id:"departamentoId",required:!0,value:E.departamentoId,onChange:I,errorMessage:z},r.a.createElement("option",{value:""},"Seleccione un Departamento"),C.map((function(e){var t=e.departamentoId,a=e.descripcion;return r.a.createElement("option",{value:t,key:t},a)})))),r.a.createElement(d.a.Group,{as:s.a,md:"12"},r.a.createElement(d.a.Label,{htmlFor:"municipioId_depto"},"C\xf3digo de Municipio"),r.a.createElement(b.TextInput,{name:"municipioId_depto",id:"municipioId_depto",required:!0,value:E.municipioId_depto,onChange:I,errorMessage:z,placeholder:"C\xf3digo de municipio seg\xfan departamento",autoComplete:"off",type:"number"})),r.a.createElement(d.a.Group,{as:s.a,md:"12"},r.a.createElement(d.a.Label,{htmlFor:"descripcion"},"Nombre"),r.a.createElement(b.TextInput,{name:"descripcion",id:"descripcion",required:!0,value:E.descripcion,onChange:I,errorMessage:z,placeholder:"Nombre",autoComplete:"off",style:{textTransform:"capitalize"},type:"text"})),t.municipioId>0&&r.a.createElement(d.a.Group,{as:s.a,md:"12"},r.a.createElement(d.a.Label,{htmlFor:"estadoId"},"Estado"),r.a.createElement(b.SelectGroup,{name:"estadoId",id:"estadoId",value:E.estadoId,required:!0,errorMessage:z,onChange:I},r.a.createElement("option",{value:""},"Seleccione un estado"),r.a.createElement("option",{value:"1"},"Activo"),r.a.createElement("option",{value:"2"},"Inactivo"))),r.a.createElement("div",{className:"col-sm-3"}),r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("button",{type:"button",onClick:function(){c(!1)},className:"btn btn-warning"}," Cancelar")),r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("button",{type:"submit",className:"btn btn-success"}," ",t.municipioId>0?"Actualizar":"Registrar")))))))},N=a(80),C=function(){var e=Object(v.d)((function(e){return e})),t=Object(n.useState)([]),a=Object(u.a)(t,2),c=a[0],E=a[1],h=Object(n.useState)(!0),k=Object(u.a)(h,2),S=k[0],C=k[1],M=Object(n.useState)(!1),G=Object(u.a)(M,2),F=G[0],P=G[1],q=Object(n.useState)([]),D=Object(u.a)(q,2),A=D[0],L=D[1],T=Object(n.useState)([]),z=Object(u.a)(T,2),_=z[0],B=z[1],H=Object(n.useState)([]),J=Object(u.a)(H,2),R=J[0],V=J[1],U={departamentoId:"",paisId:"",descripcion:"",municipioId_depto:"",estadoId:1},K=Object(n.useState)(U),Q=Object(u.a)(K,2),W=Q[0],X=Q[1],Y=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.find((function(e){return 8===e.menuId&&3===e.accesoId}))){e.next=8;break}return C(!0),e.next=4,Object(j.a)("pais?include=0?estadoId=1");case 4:(t=e.sent)&&L(t),e.next=9;break;case 8:L([{paisId:"",descripcion:"No esta autorizado"}]);case 9:C(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t>0)){e.next=10;break}if(!c.find((function(e){return 9===e.menuId&&3===e.accesoId}))){e.next=9;break}return C(!0),e.next=5,Object(j.a)("departamento?paisId=".concat(t,"&estadoId=1&include=0"));case 5:(a=e.sent)&&B(a),e.next=10;break;case 9:B([{departamentoId:"",descripcion:"No esta autorizado"}]);case 10:C(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t>0)){e.next=7;break}if(!c.find((function(e){return 10===e.menuId&&3===e.accesoId}))){e.next=7;break}return C(!0),e.next=5,Object(j.a)("municipio?departamentoId=".concat(t,"&estadoId=1;2"));case 5:(a=e.sent)&&V(a);case 7:C(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){!function(){if(null===e||void 0===e?void 0:e.accesos){var t=e.accesos.filter((function(e){return 10===e.menuId||9===e.menuId||8===e.menuId}));E(t)}C(!1)}()}),[]),Object(n.useEffect)((function(){Y()}),[c]),r.a.createElement(g.a,null,r.a.createElement(l.a,{className:"btn-page"},r.a.createElement(s.a,{sm:12},r.a.createElement(m.a,null,r.a.createElement(m.a.Header,null,r.a.createElement(m.a.Title,{as:"h5"},"Municipios")),r.a.createElement(m.a.Body,null,r.a.createElement(l.a,{className:"align-items-center m-l-0"},r.a.createElement(s.a,null,r.a.createElement(b.ValidationForm,{onSubmit:Z,onErrorSubmit:Z},r.a.createElement(d.a.Row,null,r.a.createElement(d.a.Group,{as:s.a,md:"6"},r.a.createElement(d.a.Label,{htmlFor:"paisId"},"Pais"),r.a.createElement(b.SelectGroup,{onChange:function(e){var t=e.target.value;Z(t),V([])},name:"paisId",id:"paisId",errorMessage:"Seleccione un Pais",required:!0},r.a.createElement("option",{value:""},"Seleccione un Pais"),A.map((function(e){var t=e.paisId,a=e.descripcion;return r.a.createElement("option",{value:t,key:t},a)})))),r.a.createElement(d.a.Group,{as:s.a,md:"6"},r.a.createElement(d.a.Label,{htmlFor:"departamentoId"},"Departamento"),r.a.createElement(b.SelectGroup,{onChange:function(e){var t=e.target.value;$(t)},name:"departamentoId",id:"departamentoId",errorMessage:"Seleccione un Departamento",required:!0},r.a.createElement("option",{value:""},"Seleccione un Departamento"),_.map((function(e){var t=e.departamentoId,a=e.descripcion;return r.a.createElement("option",{value:t,key:t},a)})))))))),r.a.createElement(l.a,{className:"align-items-center m-l-0"},r.a.createElement(s.a,null),r.a.createElement(s.a,{className:"text-right",md:"2"},c.find((function(e){return 10===e.menuId&&1===e.accesoId}))&&r.a.createElement(p.a,{variant:"success",className:"btn-sm btn-round has-ripple",onClick:function(){P(!0),X(U)}},r.a.createElement("i",{className:"feather icon-plus"})," Agregar Municipio"))),r.a.createElement("hr",null),!0===S?r.a.createElement(y.a,null):r.a.createElement(r.a.Fragment,null,c.find((function(e){return 10===e.menuId&&3===e.accesoId}))?r.a.createElement(f.a,{striped:!0,hover:!0,responsive:!0,bordered:!0,id:"mytable"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Codigo"),r.a.createElement("th",null,"Municipio"),r.a.createElement("th",null,"Departamento"),r.a.createElement("th",null,"Estado"),c.find((function(e){return 10===e.menuId&&2===e.accesoId||10===e.menuId&&4===e.accesoId}))&&r.a.createElement("th",null))),r.a.createElement("tbody",null,R.map((function(e){var t=e.municipioId,a=e.descripcion,n=e.Departamento.descripcion,u=e.Estado.descripcion;return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t),r.a.createElement("td",null,a),r.a.createElement("td",null,n),r.a.createElement("td",null,u),c.find((function(e){return 10===e.menuId&&2===e.accesoId||10===e.menuId&&4===e.accesoId}))&&r.a.createElement("td",{style:{textAlign:"center"}},c.find((function(e){return 10===e.menuId&&2===e.accesoId}))&&r.a.createElement("button",{className:"btn-icon btn btn-info btn-sm",onClick:function(){!function(e){var t=R.find((function(t){return t.municipioId===e})),a=t.municipioId,n=t.departamentoId,r=t.municipioId_depto,c=t.descripcion,i=t.estadoId,o=_.find((function(e){return e.departamentoId===n})).paisId;X({municipioId:a,departamentoId:n,municipioId_depto:r,descripcion:c,paisId:o,estadoId:i}),P(!0)}(t)}},r.a.createElement("i",{className:"feather icon-edit"})),c.find((function(e){return 10===e.menuId&&4===e.accesoId}))&&r.a.createElement("button",{className:"btn-icon btn btn-danger btn-sm",onClick:function(){var e;e=t,I()(O.a).fire({title:"Alerta?",text:"Esta seguro que desea eliminar el elemento",type:"warning",showCloseButton:!0,showCancelButton:!0}).then(function(){var t=Object(o.a)(i.a.mark((function t(a){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.value){t.next=8;break}return t.next=4,Object(j.a)("municipio/".concat(e),{method:"DELETE"});case 4:(n=t.sent)&&(Object(x.b)(n),r=R.filter((function(t){return t.municipioId!==e})),V(r)),t.next=9;break;case 8:Object(x.c)("No se elimin\xf3 ning\xfan elemento");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},r.a.createElement("i",{className:"feather icon-trash-2"}))))})))):r.a.createElement(N.a,null)),!0===F&&r.a.createElement(w,{abrirModal:F,setAbrirModal:P,catPaises:A,GetMunicipios:$,dataInicial:W}))))))};t.default=function(){return r.a.createElement(C,null)}},80:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),r=a.n(n),c=a(71),i=a(21),o=a(358),u=a(14),l=function(){return r.a.createElement(u.a,null,r.a.createElement(c.a,null,r.a.createElement(i.a,null,r.a.createElement(o.a,{variant:"danger"},r.a.createElement(o.a.Heading,{as:"h4"},"Informaci\xf3n!"),r.a.createElement("p",null,"No esta autorizado para poder visualizar los elementos"),r.a.createElement("hr",null),r.a.createElement("p",{className:"mb-0"},"Comuniquese con el administrador para la asignaci\xf3n de permisos")))))}}}]);
//# sourceMappingURL=24.4ce522bb.chunk.js.map